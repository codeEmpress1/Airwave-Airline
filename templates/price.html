{% extends "layout.html" %}

{% block title %}
    register
{% endblock %}

{% block main %}
    

<table class="table">
    <thead class="thead-dark">
      <tr>
        <th scope="col">#</th>
        <th scope="col">departure</th>
        <th scope="col">destination</th>
        <th scope="col">price</th>

      </tr>
    </thead>
    <tbody>
        {% for r in ro %}
      <tr>
        <th scope="row">1</th>
        <td>{{ r['departure'] }}</td>
        <td>{{ r['destination'] }}</td>
        <td name="price" id="pricepay">{{ r['price'] }}</td>
      </tr>
      {% endfor %}
    </tbody>
    <input type="hidden" value="{{ ro[0]['price'] }}" id="pricetopay">
    <input type="hidden" value="{{ emails }}" id="email">
    <button type="button" onclick="payWithPaystack();">Pay</button>
    <button type="button" onclick="payWithPaystack2();">sanwolu</button>
</table>

<div id="paystackEmbedContainer"></div>

<script src='https://js.paystack.co/v1/inline.js'></script> 
<script>
//     console.log("hello")
//   PaystackPop.setup({
//    key: 'pk_test_2c2ac8fbaf18b0e9af6b38d1e05e95c2f1f07b67',
//    email: 'customer@email.com',
//    amount: 10000,
//    container: 'paystackEmbedContainer',
//    callback: function(response){
//         alert('successfully subscribed. transaction ref is ' + response.reference);
//     },
//   });

function payWithPaystack() {
    amt=$('#pricetopay').val() * 100;
    email=$("#email").val()
    console.log(amt)
var handler = PaystackPop.setup({
    key: 'pk_test_2c2ac8fbaf18b0e9af6b38d1e05e95c2f1f07b67', //put your public key here
    email: email, //put your customer's email here
    amount: Number(amt), //amount the customer is supposed to pay
    metadata: {
        custom_fields: [
            {
                display_name: "sola",
                variable_name: "08030785122",
                value: "+2348012345678" //customer's mobile number
            }
        ]
    },

})
handler.openIframe();
}
// ###################################################


</script>


      
    


		
   
{% endblock %}
